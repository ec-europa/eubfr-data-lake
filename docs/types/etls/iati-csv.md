<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## IatiCsvTransform

Map fields for IATI producer, CSV file types

Example input data: [stub](https://github.com/ec-europa/eubfr-data-lake/blob/master/services/ingestion/etl/iati/csv/test/stubs/record.json)

Transform function: [implementation details](https://github.com/ec-europa/eubfr-data-lake/blob/master/services/ingestion/etl/iati/csv/src/lib/transform.js)

**Parameters**

-   `record` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Piece of data to transform before going to harmonized storage.

Returns **Project** JSON matching the type fields.

### getBudget

Makes use of both `total-Disbursement` and `total-Expenditure` fields when present.

Fields taken into account from raw data:

-   currency
-   total-Disbursement
-   total-Expenditure

**Parameters**

-   `record` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** The row received from parsed file

Returns **Budget** Field containing {BudgetItem}

### getProjectId

Generates values for `project_id` field since source data misses these.
It's needed for having separate projects in the Elasticsearch database.

**Parameters**

-   `record` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** The row received from parsed file

Returns **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

### getLocations

Preprocess `project_locations` field.
Depends on:

-   `getCountryCode`

Data comes from the following source fields:

-   `recipient-country-code`

**Parameters**

-   `record` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** The row received from parsed file

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Location](https://developer.mozilla.org/docs/Web/API/Location)>** 

### formatDate

Format date

**Parameters**

-   `date` **[Date](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date)** Date in `YYYY-MM-DD` (ISO) format

**Examples**

```javascript
input => "2018-12-31"
output => "2018-12-31T00:00:00.000Z"
```

Returns **[Date](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date)** The date formatted into an ISO 8601 date format
